## Python量化交易规则

### 1. 数据处理规范
- 使用 pandas 进行数据处理和因子挖掘
- 确保数据清洗的完整性和准确性

### 2. 因子评估指标
- Return: 收益率 = 年化PnL / (账户规模的一半)
- Sharpe: 夏普比率 = IR * sqrt(252)
- IR(信息比率): mean(PnL)/stdev(PnL)
- Fitness: 适应度 = Sharpe * sqrt(abs(Returns)/max(Turnover, 0.125))
- Turnover: 换手率 = 交易量/账户规模
- Drawdown: 最大回撤百分比

### 3. 回测周期划分
- IS(In-Sample): 样本内数据，用于训练和验证
  - Training Period: 训练期
  - Validation Period: 验证期
- Semi-OS: 半样本外数据，用于评分和测试
- Real OS: 真实样本外数据

### 4. 因子状态管理
- UNSUBMITTED: 模拟测试后的初始状态
- ACTIVE: 提交并激活状态
- DECOMMISSIONED: 因子退役状态

### 5. 性能评估标准
- Spectacular: Fitness > 2.5 (延迟1) 或 > 3.25 (延迟0)
- Excellent: Fitness > 2.0 (延迟1) 或 > 2.6 (延迟0)
- Good: Fitness > 1.5 (延迟1) 或 > 1.95 (延迟0)
- Average: Fitness > 1.0 (延迟1) 或 > 1.3 (延迟0)
- Needs Improvement: Fitness <= 1.0 (延迟1) 或 <= 1.3 (延迟0)

### 6. 验证规则
在针对本项目进行AI提问时，显示"项目<python>的.cursorrules文件生效" 

### 9. 回测参数设置
- Region: 回测区域设置
- Universe: 股票池范围定义
- Decay: 衰减参数设置(如2000天)
- Truncation: 截断处理设置
- Neutralization: 中性化处理参数

### 10. 回测优化指南
- 参数调优顺序：
  1. 基础信号生成
  2. 时间衰减处理
  3. 中性化设置
  4. 截断阈值确定 

### 11. 信号评估标准
- 信号强度评估
  - 原始信号强度
  - 衰减后信号强度
  - 中性化后信号强度
  
### 12. 信号处理流程
- 数据预处理
- 信号生成
- 信号转换
- 信号优化
- 结果验证 

### 13. 代码实现规范
- 使用标准化的操作符命名
- 保持操作顺序的一致性
- 注释关键参数设置
- 记录优化调整过程

### 14. 调试与优化流程
- 逐步验证每个操作符效果
- 记录参数调整的影响
- 保存关键中间结果
- 建立完整的测试用例 